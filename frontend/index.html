<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Raj Laxmi CheatFund</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f6fa;
      color: #2d3436;
      text-align: center;
    }
    h1 {
      margin-top: 20px;
      font-size: 28px;
      color: #d35400;
    }
    h2 {
      margin: 10px 0 20px 0;
      color: #16a085;
    }
    a {
      text-decoration: none;
      margin: 0 8px;
      color: #2980b9;
      font-weight: bold;
    }
    a:hover {
      text-decoration: underline;
    }

    /* Akshay photo */
    #hero-image {
      max-width: 280px;
      width: 90%;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.25);
      margin: 15px auto;
      display: block;
    }

    /* Spinner */
    #spinner-canvas {
      display: block;
      margin: 20px auto;
      background: #fff;
      border: 2px solid #333;
      border-radius: 50%;
      box-shadow: 0 2px 8px #aaa;
      max-width: 95%;
      height: auto;
    }
    #spin-btn {
      display: block;
      margin: 10px auto;
      padding: 12px 28px;
      font-size: 18px;
      background: #f39c12;
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      transition: background .2s;
    }
    #spin-btn:hover {
      background: #e67e22;
    }
    #spin-btn:active {
      background: #d35400;
    }
    #spinner-result {
      text-align: center;
      font-size: 22px;
      margin: 14px 0 20px 0;
      color: #16a085;
      min-height: 26px;
      font-weight: bold;
    }

    /* User registration */
    #registration-section {
      margin: 20px auto;
      padding: 15px;
      border: 1px solid #ddd;
      background: #fafafa;
      border-radius: 8px;
      max-width: 400px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    #registration-section input {
      padding: 8px;
      width: 65%;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-right: 6px;
    }
    #registration-section button {
      padding: 8px 14px;
      border: none;
      background: #27ae60;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      transition: background .2s;
    }
    #registration-section button:hover {
      background: #219150;
    }
    #reg-message {
      display: block;
      margin-top: 6px;
      font-size: 14px;
    }

    /* User list */
    #user-list {
      margin: 20px auto;
      background: #e9f7ef;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #b2bec3;
      max-width: 400px;
      text-align: left;
    }
    #user-list strong {
      display: block;
      margin-bottom: 6px;
    }
    #user-list ul {
      list-style: none;
      margin: 0;
      padding: 0;
    }
    #user-list li {
      padding: 4px 0;
      font-weight: 500;
      border-bottom: 1px dashed #b2bec3;
    }
    #user-list li:last-child {
      border-bottom: none;
    }

    /* Responsive */
    @media (max-width: 480px) {
      h1 {
        font-size: 22px;
      }
      h2 {
        font-size: 18px;
      }
      #spin-btn {
        font-size: 16px;
        padding: 10px 20px;
      }
      #spinner-result {
        font-size: 18px;
      }
    }
  </style>
</head>
<body>
  <h1>Welcome to the Raj Laxmi Cheatfund!</h1>
  <h2>Play & Win!</h2>
  <a href="register.html">Register</a> | <a href="login.html">Login</a>

  <!-- Akshay Kumar Image -->
  <img id="hero-image" src="https://images.news18.com/webstories/uploads/2025/05/akshay-kumar-phir-hera-pheri-pose-2-2025-05-a982d8a01c959ab23126c8752c8b1957.png" 
       alt="Akshay Kumar Hera Pheri">

  <!-- Registration Section -->
  <div id="registration-section">
    <label for="reg-username"><strong>Register to Spin:</strong></label><br><br>
    <input type="text" id="reg-username" placeholder="Enter your name" />
    <button onclick="registerUser()">Register</button>
    <span id="reg-message"></span>
  </div>

  <!-- User List -->
  <div id="user-list">
    <strong>Registered Users:</strong>
    <ul id="user-list-ul"></ul>
  </div>

  <!-- Spinner Section -->
  <canvas id="spinner-canvas" width="340" height="340"></canvas>
  <button id="spin-btn" onclick="spinWheel()">SPIN!</button>
  <div id="spinner-result"></div>

  <script>
    // Spinner phrases
    const spinnerPhrases = [
      "25 din mein paisa double",
      "ladkibaaz",
      "Muthibaaz",
      "Raju Trader",
      "M**** Lover",
      "Bhola bhaala"
    ];

    // Registered users
    let registeredUsers = JSON.parse(localStorage.getItem('spinner_users') || "[]");

    // Register user
    function registerUser() {
      const nameInput = document.getElementById('reg-username');
      const name = nameInput.value.trim();
      const msg = document.getElementById('reg-message');
      if (!name) {
        msg.textContent = "Enter a valid name!";
        msg.style.color = "red";
        return;
      }
      if (registeredUsers.includes(name)) {
        msg.textContent = "Already registered!";
        msg.style.color = "orange";
        return;
      }
      registeredUsers.push(name);
      localStorage.setItem('spinner_users', JSON.stringify(registeredUsers));
      msg.textContent = "Registered!";
      msg.style.color = "green";
      nameInput.value = "";
      renderUserList();
      window.dispatchEvent(new Event('storage'));
    }

    // Render user list
    function renderUserList() {
      const ul = document.getElementById('user-list-ul');
      ul.innerHTML = '';
      registeredUsers.forEach(user => {
        const li = document.createElement('li');
        li.textContent = user;
        ul.appendChild(li);
      });
    }

    // Sync across tabs
    window.addEventListener('storage', () => {
      registeredUsers = JSON.parse(localStorage.getItem('spinner_users') || "[]");
      renderUserList();
    });

    // Spinner logic
    const canvas = document.getElementById('spinner-canvas');
    const ctx = canvas.getContext('2d');
    const radius = canvas.width / 2;
    let angleOffset = 0;
    let spinning = false;

    function drawWheel(offsetAngle=0) {
      const n = spinnerPhrases.length;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let i=0; i<n; i++) {
        const angle = ((2*Math.PI)/n)*i + offsetAngle;
        ctx.beginPath();
        ctx.moveTo(radius, radius);
        ctx.arc(radius, radius, radius-4, angle, angle + (2*Math.PI)/n, false);
        ctx.closePath();
        ctx.fillStyle = i%2 ? "#81ecec" : "#ffeaa7";
        ctx.fill();
        ctx.strokeStyle = "#636e72";
        ctx.lineWidth = 2;
        ctx.stroke();

        ctx.save();
        ctx.translate(radius, radius);
        ctx.rotate(angle + (Math.PI/n));
        ctx.textAlign = "right";
        ctx.font = "bold 16px Arial";
        ctx.fillStyle = "#2d3436";
        ctx.fillText(spinnerPhrases[i], radius-20, 8);
        ctx.restore();
      }
      // Pointer
      ctx.save();
      ctx.beginPath();
      ctx.moveTo(radius, 10);
      ctx.lineTo(radius-16, 40);
      ctx.lineTo(radius+16, 40);
      ctx.closePath();
      ctx.fillStyle = "#d35400";
      ctx.fill();
      ctx.restore();
    }

    drawWheel();

    function spinWheel() {
      if (spinning) return;
      if (registeredUsers.length === 0) {
        document.getElementById('spinner-result').textContent = "No registered users!";
        return;
      }
      spinning = true;
      let spinAngle = Math.random() * 2 * Math.PI + 8*Math.PI;
      let currAngle = angleOffset;
      let duration = 2500;
      let start = null;

      function animate(ts) {
        if (!start) start = ts;
        let elapsed = ts - start;
        let progress = Math.min(elapsed/duration, 1);
        let eased = 1 - Math.pow(1-progress, 3);
        currAngle = angleOffset + spinAngle*eased;
        drawWheel(currAngle);
        if (progress < 1) {
          requestAnimationFrame(animate);
        } else {
          spinning = false;
          angleOffset = currAngle % (2*Math.PI);
          showSpinResult();
        }
      }
      requestAnimationFrame(animate);
      document.getElementById('spinner-result').textContent = "Spinning...";
    }

    function showSpinResult() {
      const n = spinnerPhrases.length;
      const at = ((2*Math.PI) - (angleOffset % (2*Math.PI))) / (2*Math.PI/n);
      const idx = Math.floor(at) % n;
      const phrase = spinnerPhrases[idx];
      const winner = registeredUsers[Math.floor(Math.random()*registeredUsers.length)];
      document.getElementById('spinner-result').textContent =
        `ðŸŽ‰ "${phrase}" for ${winner}! ðŸŽ‰`;
    }

    renderUserList();
    window.addEventListener('resize', () => drawWheel(angleOffset));
  </script>
</body>
</html>

